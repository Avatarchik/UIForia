<?xml version="1.0" encoding="utf-8"?>
<UITemplate>
    
    <Import value="ClippedPanel+ClippedCorner" as="ClippedCorner"/>

    <Style>
    
        style container {
            PreferredSize = 1pca;
            FlexLayoutDirection = Column;
        }
        
        style menubar {
            PreferredSize = 1pca, 64px;
            BackgroundColor = black;
            FlexLayoutDirection = Column;
            FlexLayoutMainAxisAlignment = SpaceBetween;
            FlexLayoutCrossAxisAlignment = Center;
        }    
        
        style tab-container {
            FlexLayoutDirection = Column;
            FlexLayoutCrossAxisAlignment = Center;
        }
        
        style side-bar-container {
            PreferredWidth = 1.1cnt;
            PreferredHeight = 1.2cnt;
            FlexLayoutMainAxisAlignment = SpaceBetween;
            FlexLayoutCrossAxisAlignment = Center;
            Padding = 36px, 12px;
            BackgroundColor = black;
        }
        
        style body-container {
            PreferredSize = 1pca, 1cnt;
            FlexItemSelfAlignment = Stretch;
        }
        
        style tab-text {
            TextColor = white;
            Padding = 0px, 12px;
            TextFontAsset = Gotham-Bold SDF;
        }
        
        style status-icon {
            PreferredWidth = 22px;
            PreferredHeight = 22px;
            BorderRadius = 50%;
            BorderColor = red;
            Border = 3px;
        }
        
        style status-container {
            Padding = 0px, 12px;
        }
        
        style tab-runner {
            PreferredSize = 30px, 10px;
            BackgroundColor = white;
            LayoutBehavior = Ignored;
            TransformBehaviorY = AnchorMaxOffset;
            TransformPositionY = -100%;
        }
        
        style sidebar-runner {
            PreferredSize = 6px, 48px;
            BackgroundColor = red;
            LayoutBehavior = Ignored;
        }
        
        style side-bar-item {
            PreferredSize = 64px;
        }
        
        style contents {
            BackgroundColor= white;
            Padding = 12px, 0px;
            FlexItemGrow = 1;
            PreferredWidth = 100%;
            PreferredHeight = 0;
        }
        
        style resource-container-group {
            PreferredWidth = 1pca;
        }
        
        style resource-container-header {
            PreferredWidth = 1pca;
            BackgroundColor = #F7F7F7;
            FlexLayoutDirection = Column;
            FlexLayoutCrossAxisAlignment = Center;
        }
        
        style resource-container-label {
            TextFontAsset = GothamNarrow-Book SDF;
            TextFontSize = 24;
            TextColor = #A4A4A4;
        }
        
        style resource-container-image {
            PreferredSize = 32px, 24px;
            PaddingLeft = 8px;
        }
        
        style resource-count {
            PaddingRight = 12px;
            TextColor = #6C6C6C;
            TextFontSize = 24;
            TextFontAsset = GothamNarrow-Book SDF;
        }
        
        style flex-spacer {
            FlexItemGrow = 1;
            PreferredWidth = 1;
        }
        
        
        
</Style>
<Contents style="container">

    <ClippedPanel style="side-bar-container" clipSize="30f" clippedCorner="{@ClippedCorner.BottomLeft}">
        
        <Repeat x-id="sidebar-repeater" list="{sideBarEntries}">
    
            <Image style="side-bar-item" src="{$item.imageUrl}" onMouseDown="Sidebar_MouseDown($index)"/>
    
        </Repeat>
        
        <Div x-id="sidebar-runner" x-if="false" style="sidebar-runner"/>

    </ClippedPanel>
    
    <Div style="body-container">
        
        <Panel style='menubar'>
            
            <Div x-id="tab-container" style="tab-container">
                
                <Repeat x-id="tab-repeater" list='{tabs}'>
                    
                    <Div style='tab' onMouseDown="MenuItem_MouseDown($index)">
                        <Text style="tab-text">{$item.text}</Text>
                    </Div>
                    
                </Repeat>
                
                
            </Div>
            
            <Div x-id="tab-runner" x-if="false" style="tab-runner"/>

            <Div style="status-container">
                <Div style="status-icon"/>
            </Div>
            
        </Panel>

        <!--<Children/>-->
        <!--Todo this should be replaced with a transcluded <Children/> element-->

        <ClippedPanel style="contents" clipSize="30f" clippedCorner="{@ClippedCorner.BottomLeft}">
                
            <Repeat list="{groups}">
                <Group style="resource-container-group">
                    
                    <Group style="resource-container-header">
                        
                        <Image style="resource-container-image"
                               src="'ui_icon_inventory_container_location_marker'"/>
                    
                        <Image onMouseDown="{ToggleResourceGroup($index)}"
                               style="resource-container-image"
                               src="'ui_icon_inventory_group_open'"/>
                    
                        <Text style="resource-container-label">{$item.name}</Text>
                        <Div style="flex-spacer"/>
                        <Text style="resource-count">{$item.total}</Text>
    
                    </Group>
                    
                    <ResourceListDisplay contents="{$item.contents}"/>
                    
                </Group>
               
            </Repeat>
  
        </ClippedPanel>
        
        <Children/>
      
    </Div>
    
</Contents>
</UITemplate>